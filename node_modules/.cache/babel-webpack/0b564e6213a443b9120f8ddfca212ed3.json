{"ast":null,"code":"var crypto = require('crypto');\n\nvar https = require('https');\n\nvar querystring = require('querystring');\n\nvar utils = require('./utils');\n\nvar HttpsProxyAgent = require('https-proxy-agent');\n\nvar url = require('url');\n\nvar extend = utils.extend;\nvar replace = utils.replace;\nvar DEFAULTS = {\n  username: null,\n  password: null,\n  proxy: null,\n  hostname: 'saucelabs.com',\n  base: '/rest/v1/',\n  port: '443'\n};\n\nfunction SauceLabs(options) {\n  this.options = extend({}, DEFAULTS, options);\n  this.options.auth = this.options.username + ':' + this.options.password;\n}\n\nmodule.exports = SauceLabs; // API\n\nSauceLabs.prototype.getAccountDetails = function (callback) {\n  this.send({\n    method: 'GET',\n    path: 'users/:username'\n  }, callback);\n};\n\nSauceLabs.prototype.getAccountLimits = function (callback) {\n  this.send({\n    method: 'GET',\n    path: ':username/limits'\n  }, callback);\n};\n\nSauceLabs.prototype.getUserActivity = function (start, end, callback) {\n  if (typeof start === 'function') {\n    callback = start;\n    start = null;\n    end = null;\n  } else if (typeof end === 'function') {\n    callback = end;\n    end = null;\n  }\n\n  var dates = start != null || end != null ? {} : null;\n\n  if (start != null) {\n    dates.start = formatDate(start);\n  }\n\n  if (end != null) {\n    dates.end = formatDate(end);\n  }\n\n  this.send({\n    method: 'GET',\n    path: ':username/activity',\n    query: dates\n  }, callback);\n};\n\nSauceLabs.prototype.getUserConcurrency = function (callback) {\n  this.send({\n    method: 'GET',\n    path: 'users/:username/concurrency'\n  }, callback);\n};\n\nSauceLabs.prototype.getAccountUsage = function (callback) {\n  this.send({\n    method: 'GET',\n    path: 'users/:username/usage'\n  }, callback);\n};\n\nSauceLabs.prototype.getJobs = function (callback) {\n  this.send({\n    method: 'GET',\n    path: ':username/jobs',\n    query: {\n      full: true\n    }\n  }, callback);\n};\n\nSauceLabs.prototype.showJob = function (id, callback) {\n  this.send({\n    method: 'GET',\n    path: ':username/jobs/:id',\n    args: {\n      id: id\n    }\n  }, callback);\n};\n\nSauceLabs.prototype.showJobAssets = function (id, callback) {\n  this.send({\n    method: 'GET',\n    path: ':username/jobs/:id/assets',\n    args: {\n      id: id\n    }\n  }, callback);\n};\n\nSauceLabs.prototype.updateJob = function (id, data, callback) {\n  this.send({\n    method: 'PUT',\n    path: ':username/jobs/:id',\n    args: {\n      id: id\n    },\n    data: data\n  }, callback);\n};\n\nSauceLabs.prototype.stopJob = function (id, data, callback) {\n  this.send({\n    method: 'PUT',\n    path: ':username/jobs/:id/stop',\n    args: {\n      id: id\n    },\n    data: data\n  }, callback);\n};\n\nSauceLabs.prototype.deleteJob = function (id, callback) {\n  this.send({\n    method: 'DELETE',\n    path: ':username/jobs/:id',\n    args: {\n      id: id\n    }\n  }, callback);\n};\n\nSauceLabs.prototype.getActiveTunnels = function (callback) {\n  this.send({\n    method: 'GET',\n    path: ':username/tunnels'\n  }, callback);\n};\n\nSauceLabs.prototype.getTunnel = function (id, callback) {\n  this.send({\n    method: 'GET',\n    path: ':username/tunnels/:id',\n    args: {\n      id: id\n    }\n  }, callback);\n};\n\nSauceLabs.prototype.deleteTunnel = function (id, callback) {\n  this.send({\n    method: 'DELETE',\n    path: ':username/tunnels/:id',\n    args: {\n      id: id\n    }\n  }, callback);\n};\n\nSauceLabs.prototype.getServiceStatus = function (callback) {\n  this.send({\n    method: 'GET',\n    path: 'info/status'\n  }, callback);\n};\n\nSauceLabs.prototype.getBrowsers = function (callback) {\n  this.send({\n    method: 'GET',\n    path: 'info/browsers'\n  }, callback);\n};\n\nSauceLabs.prototype.getAllBrowsers = function (callback) {\n  this.send({\n    method: 'GET',\n    path: 'info/browsers/all'\n  }, callback);\n};\n\nSauceLabs.prototype.getSeleniumBrowsers = function (callback) {\n  this.send({\n    method: 'GET',\n    path: 'info/browsers/selenium-rc'\n  }, callback);\n};\n\nSauceLabs.prototype.getWebDriverBrowsers = function (callback) {\n  this.send({\n    method: 'GET',\n    path: 'info/browsers/webdriver'\n  }, callback);\n};\n\nSauceLabs.prototype.getTestCounter = function (callback) {\n  this.send({\n    method: 'GET',\n    path: 'info/counter'\n  }, callback);\n};\n\nSauceLabs.prototype.updateSubAccount = function (data, callback) {\n  this.send({\n    method: 'POST',\n    path: 'users/:username/subscription',\n    data: data\n  }, callback);\n};\n\nSauceLabs.prototype.deleteSubAccount = function (callback) {\n  this.send({\n    method: 'DELETE',\n    path: 'users/:username/subscription'\n  }, callback);\n};\n\nSauceLabs.prototype.createSubAccount = function (data, callback) {\n  this.send({\n    method: 'POST',\n    path: 'users/:username',\n    data: data\n  }, callback);\n};\n\nSauceLabs.prototype.createPublicLink = function (id, date, useHour, callback) {\n  if (typeof date === 'function') {\n    callback = date;\n    date = null;\n    useHour = false;\n  } else if (typeof useHour === 'function') {\n    callback = useHour;\n    useHour = false;\n  }\n\n  if (date != null) {\n    date = formatDate(date, useHour);\n  }\n\n  var link = generateLink(this.options.hostname, this.options.auth, date, id);\n  callback(null, link);\n};\n\nSauceLabs.prototype.send = function (message, callback) {\n  var method = message.method,\n      path = message.path,\n      args = message.args,\n      query = message.query,\n      data = message.data,\n      body = JSON.stringify(data); // Build path with base, placeholders, and query.\n\n  path = this.options.base + replace(path, extend({}, this.options, args));\n\n  if (query != null) {\n    path += '?' + querystring.stringify(query);\n  } // Make the request.\n\n\n  var options = extend({}, this.options, {\n    method: method,\n    path: path,\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json',\n      'Content-Length': body != null ? Buffer.byteLength(body) : 0\n    }\n  });\n  makeRequest(options, body, callback);\n};\n\nSauceLabs.prototype.getSubAccountList = function (callback) {\n  this.send({\n    method: 'GET',\n    path: 'users/:username/list-subaccounts'\n  }, callback);\n};\n\nSauceLabs.prototype.getSubAccounts = function (callback) {\n  this.send({\n    method: 'GET',\n    path: 'users/:username/subaccounts'\n  }, callback);\n}; // Helpers\n\n\nfunction formatDate(date, useHour) {\n  return date.toISOString().replace(/T(\\d+).*/, useHour ? '-$1' : '');\n}\n\nfunction generateToken(auth, date, job) {\n  var key = auth + (date ? ':' + date : '');\n  return crypto.createHmac('md5', key).update(job).digest('hex');\n}\n\nfunction generateLink(hostname, auth, date, job) {\n  return replace('https://:hostname/jobs/:id?auth=:token', {\n    hostname: hostname,\n    id: job,\n    token: generateToken(auth, date, job)\n  });\n}\n\nfunction makeRequest(options, body, callback) {\n  if (options.proxy) {\n    options.agent = new HttpsProxyAgent(url.parse(options.proxy));\n  }\n\n  var request = https.request(options, function (response) {\n    var result = '';\n\n    if (callback) {\n      response.on('data', function (chunk) {\n        result += chunk;\n      }).on('end', function () {\n        var res;\n\n        try {\n          res = JSON.parse(result);\n        } catch (e) {\n          callback('Could not parse response: ' + result);\n          return;\n        }\n\n        if (response.statusCode === 200) {\n          callback(null, res);\n        } else {\n          callback(res);\n        }\n      });\n    }\n  });\n  request.on('error', function (err) {\n    callback('Could not send request: ' + err.message);\n  });\n\n  if (body != null) {\n    request.write(body);\n  }\n\n  request.end();\n}","map":{"version":3,"sources":["C:/Users/NeverMind/IntelliJIDEAProjects/argon-dashboard-angular-master/node_modules/saucelabs/lib/SauceLabs.js"],"names":["crypto","require","https","querystring","utils","HttpsProxyAgent","url","extend","replace","DEFAULTS","username","password","proxy","hostname","base","port","SauceLabs","options","auth","module","exports","prototype","getAccountDetails","callback","send","method","path","getAccountLimits","getUserActivity","start","end","dates","formatDate","query","getUserConcurrency","getAccountUsage","getJobs","full","showJob","id","args","showJobAssets","updateJob","data","stopJob","deleteJob","getActiveTunnels","getTunnel","deleteTunnel","getServiceStatus","getBrowsers","getAllBrowsers","getSeleniumBrowsers","getWebDriverBrowsers","getTestCounter","updateSubAccount","deleteSubAccount","createSubAccount","createPublicLink","date","useHour","link","generateLink","message","body","JSON","stringify","headers","Buffer","byteLength","makeRequest","getSubAccountList","getSubAccounts","toISOString","generateToken","job","key","createHmac","update","digest","token","agent","parse","request","response","result","on","chunk","res","e","statusCode","err","write"],"mappings":"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","sourcesContent":["var crypto      = require('crypto');\nvar https       = require('https');\nvar querystring = require('querystring');\nvar utils       = require('./utils');\nvar HttpsProxyAgent = require('https-proxy-agent');\nvar url = require('url');\n\n\n\nvar extend  = utils.extend;\nvar replace = utils.replace;\n\nvar DEFAULTS = {\n  username:  null,\n  password:  null,\n  proxy: null,\n  hostname:  'saucelabs.com',\n  base:      '/rest/v1/',\n  port:      '443'\n};\n\nfunction SauceLabs(options) {\n  this.options = extend({}, DEFAULTS, options);\n  this.options.auth = this.options.username + ':' + this.options.password;\n}\n\nmodule.exports = SauceLabs;\n\n// API\n\nSauceLabs.prototype.getAccountDetails = function (callback) {\n  this.send({\n    method: 'GET',\n    path: 'users/:username'\n  }, callback);\n};\n\nSauceLabs.prototype.getAccountLimits = function (callback) {\n  this.send({\n    method: 'GET',\n    path: ':username/limits'\n  }, callback);\n};\n\nSauceLabs.prototype.getUserActivity = function (start, end, callback) {\n  if (typeof start === 'function') {\n    callback = start;\n    start    = null;\n    end      = null;\n  } else if (typeof end === 'function') {\n    callback = end;\n    end      = null;\n  }\n\n  var dates = (start != null || end != null) ? {} : null;\n  if (start != null) {\n    dates.start = formatDate(start);\n  }\n  if (end != null) {\n    dates.end = formatDate(end);\n  }\n\n  this.send({\n    method: 'GET',\n    path: ':username/activity',\n    query: dates\n  }, callback);\n};\n\nSauceLabs.prototype.getUserConcurrency = function (callback) {\n  this.send({\n    method: 'GET',\n    path: 'users/:username/concurrency'\n  }, callback);\n};\n\nSauceLabs.prototype.getAccountUsage = function (callback) {\n  this.send({\n    method: 'GET',\n    path: 'users/:username/usage'\n  }, callback);\n};\n\nSauceLabs.prototype.getJobs = function (callback) {\n  this.send({\n    method: 'GET',\n    path: ':username/jobs',\n    query: { full: true }\n  }, callback);\n};\n\nSauceLabs.prototype.showJob = function (id, callback) {\n  this.send({\n    method: 'GET',\n    path: ':username/jobs/:id',\n    args: { id: id }\n  }, callback);\n};\n\nSauceLabs.prototype.showJobAssets = function (id, callback) {\n  this.send({\n    method: 'GET',\n    path: ':username/jobs/:id/assets',\n    args: { id: id }\n  }, callback);\n};\n\nSauceLabs.prototype.updateJob = function (id, data, callback) {\n  this.send({\n    method: 'PUT',\n    path: ':username/jobs/:id',\n    args: { id: id },\n    data: data\n  }, callback);\n};\n\nSauceLabs.prototype.stopJob = function (id, data, callback) {\n  this.send({\n    method: 'PUT',\n    path: ':username/jobs/:id/stop',\n    args: { id: id },\n    data: data\n  }, callback);\n};\n\nSauceLabs.prototype.deleteJob = function (id, callback) {\n  this.send({\n    method: 'DELETE',\n    path: ':username/jobs/:id',\n    args: { id: id }\n  }, callback);\n};\n\nSauceLabs.prototype.getActiveTunnels = function (callback) {\n  this.send({\n    method: 'GET',\n    path: ':username/tunnels'\n  }, callback);\n};\n\nSauceLabs.prototype.getTunnel = function (id, callback){\n  this.send({\n    method: 'GET',\n    path: ':username/tunnels/:id',\n    args: { id: id }\n  }, callback);\n};\n\nSauceLabs.prototype.deleteTunnel = function (id, callback){\n  this.send({\n    method: 'DELETE',\n    path: ':username/tunnels/:id',\n    args: { id: id }\n  }, callback);\n};\n\nSauceLabs.prototype.getServiceStatus = function (callback) {\n  this.send({\n    method: 'GET',\n    path: 'info/status'\n  }, callback);\n};\n\nSauceLabs.prototype.getBrowsers = function (callback) {\n  this.send({\n    method: 'GET',\n    path: 'info/browsers'\n  }, callback);\n};\n\nSauceLabs.prototype.getAllBrowsers = function (callback) {\n  this.send({\n    method: 'GET',\n    path: 'info/browsers/all'\n  }, callback);\n};\n\nSauceLabs.prototype.getSeleniumBrowsers = function (callback) {\n  this.send({\n    method: 'GET',\n    path: 'info/browsers/selenium-rc'\n  }, callback);\n};\n\nSauceLabs.prototype.getWebDriverBrowsers = function (callback) {\n  this.send({\n    method: 'GET',\n    path: 'info/browsers/webdriver'\n  }, callback);\n};\n\nSauceLabs.prototype.getTestCounter = function (callback) {\n  this.send({\n    method: 'GET',\n    path: 'info/counter'\n  }, callback);\n};\n\nSauceLabs.prototype.updateSubAccount = function (data, callback) {\n  this.send({\n    method: 'POST',\n    path: 'users/:username/subscription',\n    data: data\n  }, callback);\n};\n\nSauceLabs.prototype.deleteSubAccount = function (callback) {\n  this.send({\n    method: 'DELETE',\n    path: 'users/:username/subscription'\n  }, callback);\n};\n\nSauceLabs.prototype.createSubAccount = function (data, callback) {\n  this.send({\n    method: 'POST',\n    path: 'users/:username',\n    data: data\n  }, callback);\n};\n\nSauceLabs.prototype.createPublicLink = function (id, date, useHour, callback) {\n  if (typeof date === 'function') {\n    callback = date;\n    date     = null;\n    useHour  = false;\n  } else if (typeof useHour === 'function') {\n    callback = useHour;\n    useHour  = false;\n  }\n\n  if (date != null) {\n    date = formatDate(date, useHour);\n  }\n\n  var link = generateLink(this.options.hostname, this.options.auth, date, id);\n  callback(null, link);\n};\n\nSauceLabs.prototype.send = function (message, callback) {\n  var method  = message.method,\n      path    = message.path,\n      args    = message.args,\n      query   = message.query,\n      data    = message.data,\n      body    = JSON.stringify(data);\n\n  // Build path with base, placeholders, and query.\n  path = this.options.base + replace(path, extend({}, this.options, args));\n  if (query != null) {\n    path += '?' + querystring.stringify(query);\n  }\n\n  // Make the request.\n  var options = extend({}, this.options, {\n    method: method,\n    path:   path,\n\n    headers: {\n      'Accept':         'application/json',\n      'Content-Type':   'application/json',\n      'Content-Length': body != null ? Buffer.byteLength(body) : 0\n    }\n  });\n  makeRequest(options, body, callback);\n};\n\nSauceLabs.prototype.getSubAccountList = function (callback) {\n  this.send({\n    method: 'GET',\n    path: 'users/:username/list-subaccounts'\n  }, callback);\n};\n\nSauceLabs.prototype.getSubAccounts = function (callback) {\n  this.send({\n    method: 'GET',\n    path: 'users/:username/subaccounts'\n  }, callback);\n};\n\n// Helpers\n\nfunction formatDate(date, useHour) {\n  return date.toISOString().replace(/T(\\d+).*/, (useHour ? '-$1' : ''));\n}\n\nfunction generateToken(auth, date, job) {\n  var key = auth + (date ? ':' + date : '');\n  return crypto\n    .createHmac('md5', key)\n    .update(job)\n    .digest('hex');\n}\n\nfunction generateLink(hostname, auth, date, job) {\n  return replace('https://:hostname/jobs/:id?auth=:token', {\n    hostname: hostname,\n    id:       job,\n    token:    generateToken(auth, date, job)\n  });\n}\n\nfunction makeRequest(options, body, callback) {\n    if(options.proxy){\n        options.agent = new HttpsProxyAgent(url.parse(options.proxy));\n    }\n    var request = https.request(options, function (response) {\n    var result = '';\n    if (callback) {\n      response\n        .on('data', function (chunk) {\n          result += chunk;\n        })\n        .on('end', function () {\n          var res;\n\n          try {\n            res = JSON.parse(result);\n          } catch (e) {\n            callback('Could not parse response: ' + result);\n            return;\n          }\n\n          if (response.statusCode === 200) {\n            callback(null, res);\n          } else {\n            callback(res);\n          }\n        });\n    }\n  });\n\n  request\n    .on('error', function (err) {\n      callback('Could not send request: ' + err.message);\n    });\n\n  if (body != null) {\n    request.write(body);\n  }\n\n  request.end();\n}\n"]},"metadata":{},"sourceType":"script"}